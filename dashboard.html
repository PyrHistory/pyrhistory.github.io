<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyr: The Great Human Lab - Dashboard Navigation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/inter-ui/3.19.3/inter.css" rel="stylesheet">
    <style>
        /* --------------------------------
           CSS Variables - Design System
        -------------------------------- */
        :root {
            /* Color System */
            --lab-blue: #0F172A;
            --deep-blue: #1E293B;
            --flame: #F97316;
            --amber: #FBBF24;
            --papyrus: #F8F5EF;
            --parchment: #EFE6D5;
            --scroll: #E0D5C0;
            --success: #14B8A6;
            --warning: #FBBF24;
            --error: #F43F5E;
            --info: #3B82F6;
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.5);
            --text-dark: #1E293B;
            --text-light-bg-primary: #1F2937;
            --text-light-bg-secondary: #4b5563;
            --heading-accent: #F3EDD6;

            /* Gradients */
            --gradient-blue: #0099F7; --gradient-teal: #00c2a8; --gradient-green: #9DEC3E;
            --gradient-amber: #FFC837; --gradient-pink: #FF3D7A; --gradient-purple: #C353EB;
            --gradient-periwinkle: #5586F4;
            --gradient-flame: linear-gradient(135deg, var(--flame), var(--amber));
            --gradient-tech: conic-gradient( at 50% 50%, var(--gradient-blue) 0%, var(--gradient-teal) 15%, var(--gradient-green) 30%, var(--gradient-amber) 45%, var(--gradient-pink) 60%, var(--gradient-purple) 75%, var(--gradient-periwinkle) 90%, var(--gradient-blue) 100% );
            --gradient-dark-nav: linear-gradient(to bottom right, #1a202c, #2d3748);
            --gradient-dark-button: linear-gradient(90deg, #1a202c, #2d3748, #4a5568, #2d3748, #1a202c);

            /* Spacing System (8px base) */
            --space-xxs: 0.125rem; /* 2px */
            --space-xs: 0.25rem;  /* 4px */
            --space-sm: 0.5rem;   /* 8px */
            --space-md: 1rem;     /* 16px */
            --space-lg: 1.5rem;   /* 24px */
            --space-xl: 2rem;     /* 32px */
            --space-2xl: 3rem;    /* 48px */
            --space-3xl: 4rem;    /* 64px */
            --space-4xl: 6rem;    /* 96px */

            /* Border Radius */
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
            --radius-2xl: 2rem;
            --radius-full: 9999px;

            /* Shadow System */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0,0,0,0.25);
            --shadow-inner: inset 0 2px 4px 0 rgba(0,0,0,0.06);

            /* Transitions & Animations - Faster */
            --transition-fast: 0.1s ease-out;
            --transition-medium: 0.2s ease-out;
            --transition-slow: 0.3s ease-out;
            --transition-bounce: 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            --transition-spring: 0.3s cubic-bezier(0.68, -0.6, 0.32, 1.6);

            /* Focus */
            --focus-ring-color: var(--flame);
            --focus-ring-width: 3px;
            --focus-ring-offset: 2px;
            --focus-ring: var(--focus-ring-width) solid var(--focus-ring-color);
        }

        /* --------------------------------
           CSS Reset & Global Styles
        -------------------------------- */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
             scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--lab-blue);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
        }

        /* Enhanced dynamic background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            /* REMOVED the first radial gradient (orange one at 15% 15%) */
            background-image:
                radial-gradient(circle at 85% 85%, rgba(197, 83, 235, 0.18) 0%, transparent 45%), /* Purple bottom-right */
                radial-gradient(circle at 85% 15%, rgba(56, 189, 248, 0.08) 0%, transparent 40%), /* Blue top-right */
                radial-gradient(circle at 15% 85%, rgba(255, 202, 40, 0.12) 0%, transparent 40%); /* Amber bottom-left */
            animation: ambient-shift 30s ease infinite alternate;
        }

        @keyframes ambient-shift {
            0% {
                /* Adjust background positions if needed after removal */
                background-position: 0% 0%, 0% 0%, 0% 0%;
            }
            100% {
                background-position: -5% -5%, 10% -5%, -10% 5%; /* Adjust offsets as desired */
            }
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        /* Accessibility Focus State */
        *:focus-visible {
            outline: var(--focus-ring);
            outline-offset: var(--focus-ring-offset);
            box-shadow: 0 0 0 var(--focus-ring-offset) var(--lab-blue), 0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) var(--focus-ring-color);
            border-radius: var(--radius-md); /* Add radius to focus */
        }

        *:focus:not(:focus-visible) {
            outline: none;
        }

        /* --------------------------------
           CORE EMOJI COMPONENT CSS
        -------------------------------- */

        /* Container for floating emojis */
        #emoji-container {
            position: fixed; /* Covers the whole viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;   /* Crucial */
            pointer-events: none; /* Allows clicks to pass through */
            z-index: 0; /* Behind content (1), above background (-1, -2) */
        }

        /* Individual emoji styles */
        .floating-emoji {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            user-select: none;
            will-change: transform, opacity;
            animation-name: float-across;
            animation-timing-function: linear;
            animation-fill-mode: forwards;
            opacity: 0; /* Start invisible */
        }

        /* The animation definition */
        @keyframes float-across {
            0% {
                transform: translateX(-100px) translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: var(--emoji-opacity, 0.2);
                transform: translateX(calc(10vw - 50px)) translateY(calc(var(--emoji-drift) * 0.1)) rotate(calc(var(--emoji-rotation) * 0.1));
            }
            40% {
                 opacity: var(--emoji-opacity, 0.2);
                 transform: translateX(calc(40vw - 50px)) translateY(calc(var(--emoji-drift) * 0.4)) rotate(calc(var(--emoji-rotation) * 0.4));
            }
            50% {
                 opacity: calc(var(--emoji-opacity, 0.2) * 0.3);
                 transform: translateX(calc(50vw - 50px)) translateY(calc(var(--emoji-drift) * 0.5)) rotate(calc(var(--emoji-rotation) * 0.5));
            }
            60% {
                 opacity: var(--emoji-opacity, 0.2);
                 transform: translateX(calc(60vw - 50px)) translateY(calc(var(--emoji-drift) * 0.6)) rotate(calc(var(--emoji-rotation) * 0.6));
            }
            90% {
                opacity: var(--emoji-opacity, 0.2);
                transform: translateX(calc(90vw - 50px)) translateY(calc(var(--emoji-drift) * 0.9)) rotate(calc(var(--emoji-rotation) * 0.9));
            }
            95% {
                 opacity: 0;
                 transform: translateX(calc(100vw - 50px)) translateY(var(--emoji-drift)) rotate(var(--emoji-rotation));
            }
            100% {
                transform: translateX(calc(100vw + 100px)) translateY(var(--emoji-drift)) rotate(var(--emoji-rotation));
                opacity: 0;
            }
        }
        /* --------------------------------
           END OF CORE EMOJI COMPONENT CSS
        -------------------------------- */


        /* --------------------------------
           Typography
        -------------------------------- */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: var(--space-md);
            color: var(--text-primary);
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .gradient-title {
            background: var(--gradient-flame);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            position: relative;
            display: inline-block;
        }

        /* --------------------------------
           Top Navbar (added)
        -------------------------------- */
        .top-navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-lg) var(--space-2xl);
            background-image: linear-gradient(to right, var(--lab-blue), #111529);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
            box-shadow: var(--shadow-lg);
        }

        .logo-section { display: flex; align-items: center; }
        .logo {
            background: var(--gradient-flame); -webkit-background-clip: text; background-clip: text; color: transparent;
            font-size: 2rem; font-weight: 800; line-height: 1.2; padding-bottom: 0.2rem; position: relative;
            text-shadow: 0 0 15px rgba(249, 115, 22, 0.25); transition: transform var(--transition-spring); text-decoration: none;
        }
        .logo:hover { transform: scale(1.05); }
        .divider { height: 24px; width: 1px; background: rgba(255, 255, 255, 0.15); margin: 0 var(--space-md); align-self: center; }
        .brand-name { color: var(--text-secondary); font-size: 0.9rem; font-weight: 500; white-space: nowrap; }
        .nav-links { display: flex; align-items: center; gap: var(--space-xl); }
        .nav-link {
            color: var(--text-secondary); text-decoration: none; font-size: 0.875rem; font-weight: 500;
            transition: color var(--transition-fast); position: relative; padding: var(--space-xs) 0; white-space: nowrap;
        }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background: var(--gradient-flame); transition: width var(--transition-medium); }
        .nav-link:hover { color: var(--text-primary); }
        .nav-link:hover::after { width: 100%; }

        .notification { position: relative; display: flex; align-items: center; color: var(--text-secondary); cursor: pointer; transition: color var(--transition-fast); }
        .notification:hover { color: var(--text-primary); }
        .notification .icon { width: 24px; height: 24px; stroke: currentColor; }
        .notification-badge {
            position: absolute; top: -6px; right: -8px; background: var(--error); color: white;
            border-radius: var(--radius-full); min-width: 18px; height: 18px; display: flex;
            align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600;
            padding: 0 5px; border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 8px rgba(244, 63, 94, 0.4); animation: pulse-badge 2s infinite;
        }
        @keyframes pulse-badge { 0% { box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.6); } 70% { box-shadow: 0 0 0 7px rgba(244, 63, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(244, 63, 94, 0); } }
        .avatar {
            width: 40px; height: 40px; background: linear-gradient(135deg, #475569, #64748b); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-size: 0.9rem; color: white;
            font-weight: 600; letter-spacing: -0.5px; border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-bounce); cursor: pointer;
        }
        .avatar:hover { border-color: rgba(255, 255, 255, 0.3); transform: scale(1.1) rotate(5deg); box-shadow: 0 0 15px rgba(255, 255, 255, 0.2); }


        /* --------------------------------
           Main Content and Dashboard Bubbles
        -------------------------------- */
        .main-content {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center; /* Vertically center content by default (Desktop) */
            /* Moderate padding, rely on align-items for vertical centering */
            padding: var(--space-3xl) var(--space-lg); /* Start with generous vertical padding */
            min-height: 100vh; /* Changed to ensure it takes full viewport height minus potential footer */
            box-sizing: border-box; /* Include padding in height calculation */
            position: relative;
            z-index: 1; /* Above emojis (z-index: 0) */
        }

        .container {
            width: 100%;
            max-width: 100%;
            /* height: 100%; Remove fixed height */
            display: flex;
            justify-content: center;
            align-items: center; /* Keep centering its child */
            flex-grow: 1; /* Allow container to grow */
        }

        .dashboard-nav-container {
            /* Remove fixed padding */
            width: 100%;
            max-width: 1600px;
            /* height: 100%; Remove fixed height */
            display: flex;
            justify-content: center;
            align-items: center; /* Keep centering grid */
            flex-grow: 1; /* Allow container to grow */
        }

        .dashboard-nav-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(300px, 450px));
            gap: 4vh 6vw;
            width: 90%;
            max-width: 1100px;
            margin: 0 auto; /* Horizontal centering */
            justify-content: center;
            /* Let the parent's align-items handle vertical centering */
        }

        .nav-bubble {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: var(--space-lg);
            border-radius: var(--radius-2xl);
            transition: opacity 0.3s ease-out, filter 0.3s ease-out, box-shadow 0.3s ease-out, border-color 0.3s ease-out;
            cursor: pointer;
            position: relative;
            border: 1px solid transparent;
            background-color: rgba(30, 41, 59, 0.7);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            z-index: 2;
            will-change: transform, opacity, filter, box-shadow;
        }

        .nav-bubble::before { /* Inner radial glow */
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.08) 0%, transparent 70%);
            border-radius: inherit;
            opacity: 0;
            transition: opacity 0.8s ease-out;
            z-index: 0;
        }

        .nav-bubble::after { /* Hover conic gradient */
            content: '';
            position: absolute;
            top: -50%; left: -50%; width: 200%; height: 200%;
            background: conic-gradient(transparent, rgba(255, 255, 255, 0.04), transparent 30%);
            opacity: 0;
            transform: rotate(0deg);
            transition: opacity 0.8s ease-out;
            z-index: 0;
        }

        .nav-bubble:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25),
                        inset 0 0 0 1px rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.25);
        }

        .nav-bubble:hover::before { opacity: 1; }
        .nav-bubble:hover::after { opacity: 0.6; animation: rotate 20s linear infinite; }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .nav-bubble.active {
            z-index: 5;
             box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3),
                        inset 0 0 0 1px rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
            animation-play-state: paused;
        }

        .nav-bubble.inactive {
            opacity: 0.4;
            filter: saturate(0.5) blur(1.5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
             z-index: 1;
        }

        .nav-bubble-icon-circle {
            width: 120px;
            height: 120px;
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-lg);
            position: relative;
            transition: transform 0.3s var(--transition-spring), box-shadow 0.3s var(--transition-spring);
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
        }

        .nav-bubble-icon-circle::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.03));
            border-radius: inherit; z-index: 0;
        }

        .nav-bubble-icon-circle::after {
            content: ''; position: absolute; top: 50%; left: 50%;
            width: 150%; height: 150%;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0) 60%, rgba(255, 255, 255, 0) 100%);
            transform: translate(-50%, -50%) scale(0); border-radius: 50%;
            opacity: 0; z-index: 0;
        }

        .nav-bubble-icon-circle .icon {
            position: relative;
            z-index: 2;
            width: 64px;
            height: 64px;
            filter: drop-shadow(0 6px 10px rgba(0,0,0,0.4));
            transition: transform 0.3s var(--transition-spring);
            transform-origin: center bottom;
            will-change: transform;
        }

        .icon-particle {
            position: absolute; width: 6px; height: 6px;
            border-radius: 50%; z-index: 1;
            opacity: 0; transform: scale(0);
            will-change: transform, opacity;
        }

        .nav-bubble:hover .nav-bubble-icon-circle {
            transform: scale(1.05) rotate(-2deg);
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.15), 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .nav-bubble:hover .nav-bubble-icon-circle::after {
            animation: ripple 2s ease-out;
        }
        @keyframes ripple {
            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0.3; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }

        .nav-bubble:hover .icon,
        .nav-bubble.active .icon {
            transform: scale(1.4) translateY(-8px);
        }

        .nav-bubble.active .nav-bubble-icon-circle {
             transform: scale(1.1) rotate(2deg);
            box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.2), 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .nav-bubble:hover .icon-particle {
            animation: particle-burst 1.5s forwards;
        }
        @keyframes particle-burst {
            0% { transform: translate(0, 0) scale(0); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translate(var(--tx), var(--ty)) scale(1); opacity: 0; }
        }

        .nav-bubble-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: var(--space-xs);
            color: var(--text-primary);
            position: relative;
            z-index: 1;
            transition: color 0.3s ease-out;
        }

        .nav-bubble-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            position: relative;
            z-index: 1;
            transition: color 0.3s ease-out;
        }


        /* Bubble color variations */
        .bubble-purple { border: 1px solid rgba(124, 58, 237, 0.2); }
        .bubble-purple .nav-bubble-icon-circle { background: linear-gradient(135deg, rgba(138, 43, 226, 0.3), rgba(124, 58, 237, 0.15)); border: 1px solid rgba(124, 58, 237, 0.2); }
        .bubble-purple .icon { color: #d8b4fe; }
        .bubble-purple:hover { border-color: rgba(124, 58, 237, 0.5); }

        .bubble-blue { border: 1px solid rgba(59, 130, 246, 0.2); }
        .bubble-blue .nav-bubble-icon-circle { background: linear-gradient(135deg, rgba(37, 99, 235, 0.3), rgba(59, 130, 246, 0.15)); border: 1px solid rgba(59, 130, 246, 0.2); }
        .bubble-blue .icon { color: #93c5fd; }
        .bubble-blue:hover { border-color: rgba(59, 130, 246, 0.5); }

        .bubble-orange { border: 1px solid rgba(249, 115, 22, 0.2); }
        .bubble-orange .nav-bubble-icon-circle { background: linear-gradient(135deg, rgba(234, 88, 12, 0.3), rgba(249, 115, 22, 0.15)); border: 1px solid rgba(249, 115, 22, 0.2); }
        .bubble-orange .icon { color: #fdba74; }
        .bubble-orange:hover { border-color: rgba(249, 115, 22, 0.5); }

        .bubble-green { border: 1px solid rgba(16, 185, 129, 0.2); }
        .bubble-green .nav-bubble-icon-circle { background: linear-gradient(135deg, rgba(5, 150, 105, 0.3), rgba(16, 185, 129, 0.15)); border: 1px solid rgba(16, 185, 129, 0.2); }
        .bubble-green .icon { color: #6ee7b7; }
        .bubble-green:hover { border-color: rgba(16, 185, 129, 0.5); }


        /* Bubble Float Animations */
        @keyframes float-1 { 0% { transform: translateY(0px) rotate(0deg) scale(1); } 25% { transform: translateY(-12px) rotate(1deg) scale(1.01); } 50% { transform: translateY(0px) rotate(-0.5deg) scale(1); } 75% { transform: translateY(8px) rotate(-1deg) scale(0.99); } 100% { transform: translateY(0px) rotate(0deg) scale(1); } }
        @keyframes float-2 { 0% { transform: translateY(0px) rotate(0deg) scale(1); } 25% { transform: translateY(10px) rotate(-1deg) scale(0.99); } 50% { transform: translateY(2px) rotate(0.5deg) scale(1.01); } 75% { transform: translateY(-8px) rotate(1deg) scale(1.02); } 100% { transform: translateY(0px) rotate(0deg) scale(1); } }
        @keyframes float-3 { 0% { transform: translateY(0px) rotate(0deg) scale(1); } 25% { transform: translateY(-8px) rotate(-1deg) scale(1.01); } 50% { transform: translateY(-3px) rotate(-0.5deg) scale(0.99); } 75% { transform: translateY(10px) rotate(1deg) scale(1.01); } 100% { transform: translateY(0px) rotate(0deg) scale(1); } }
        @keyframes float-4 { 0% { transform: translateY(0px) rotate(0deg) scale(1); } 25% { transform: translateY(8px) rotate(1deg) scale(0.99); } 50% { transform: translateY(3px) rotate(-0.5deg) scale(1.01); } 75% { transform: translateY(-10px) rotate(-1deg) scale(1.01); } 100% { transform: translateY(0px) rotate(0deg) scale(1); } }

        /* Apply animations */
        .bubble-float-1 { animation: float-1 7s ease-in-out infinite; }
        .bubble-float-2 { animation: float-2 8s ease-in-out infinite; }
        .bubble-float-3 { animation: float-3 9s ease-in-out infinite; }
        .bubble-float-4 { animation: float-4 10s ease-in-out infinite; }

        .nav-bubble.active {
            animation-play-state: paused;
        }

        /* --------------------------------
           Toast Notification
        -------------------------------- */
        .toast-container {
            position: fixed;
            top: 100px; /* Below navbar */
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            pointer-events: none;
            z-index: 1000;
        }

        .toast {
            background: var(--deep-blue);
            color: var(--text-primary);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 90%;
            width: auto;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast-icon {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            color: var(--flame);
        }

        .toast-content {
            flex-grow: 1;
            font-size: 0.9rem;
        }

        /* --------------------------------
           Footer
        -------------------------------- */
        .footer {
            /* margin-top: auto; /* Push footer to bottom if main content doesn't fill space */
            padding-top: var(--space-xl);
            padding-bottom: var(--space-lg);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
            flex-shrink: 0; /* Prevent footer from shrinking */
        }

        .footer::after {
            content: ''; position: absolute; bottom: 0; left: 0;
            width: 100%; height: 5px;
            background: linear-gradient(90deg, var(--flame), var(--amber), #C353EB, var(--success), var(--flame));
            background-size: 400% 400%; animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; }
        }

        .footer-content {
            display: flex; justify-content: space-between; align-items: center;
            flex-wrap: wrap; gap: var(--space-md); max-width: 1200px;
            margin: 0 auto; padding: 0 var(--space-lg);
        }
        .footer-logo {
            background: var(--gradient-flame); -webkit-background-clip: text;
            background-clip: text; color: transparent; font-size: 1.8rem; font-weight: 800;
        }
        .footer-copyright { color: var(--text-muted); font-size: 0.8rem; margin-top: var(--space-xs); }
        .footer-links { display: flex; gap: var(--space-lg); }
        .footer-link {
            color: var(--text-muted); text-decoration: none; font-size: 0.8rem; font-weight: 500;
            transition: color var(--transition-fast); position: relative;
        }
        .footer-link::after {
            content: ''; position: absolute; width: 0; height: 1px; bottom: -2px; left: 0;
            background: var(--gradient-flame); transition: width var(--transition-medium);
            border-radius: var(--radius-full);
        }
        .footer-link:hover, .footer-link:focus-visible { color: var(--text-primary); outline: none; }
        .footer-link:hover::after, .footer-link:focus-visible::after { width: 100%; }

        /* --------------------------------
           Responsive Design Adjustments
        -------------------------------- */
        @media (max-width: 1024px) {
            .dashboard-nav-grid { gap: var(--space-lg) var(--space-xl); }
        }

        @media (max-width: 768px) {
             .main-content { /* Target the main flex container */
                 align-items: flex-start; /* Push content towards the top on mobile */
                 /* Apply minimal top/bottom padding specifically for mobile */
                 padding-top: var(--space-xl); /* Minimal top gap */
                 padding-bottom: var(--space-2xl); /* Slightly more space before footer */
            }

            .dashboard-nav-grid {
                grid-template-columns: 1fr; /* Single column */
                max-width: 450px;
                gap: var(--space-xl);
            }
            .nav-bubble { padding: var(--space-md); }
            .nav-bubble-icon-circle { width: 80px; height: 80px; }
            .nav-bubble-icon-circle .icon { width: 40px; height: 40px; }

            .nav-bubble:hover .icon,
            .nav-bubble.active .icon {
                transform: scale(1.3) translateY(-5px);
            }

            .footer-content { flex-direction: column; align-items: center; text-align: center; }
            .footer-links { justify-content: center; }
        }

         @media (max-width: 480px) {
             h1 { font-size: 2rem; }
             .nav-bubble-title { font-size: 1rem; }
             .nav-bubble-description { font-size: 0.8rem; }
         }


        /* Accessibility: Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            html { scroll-behavior: auto !important; }
            /* Keep general reduction rules if desired, but disable specific animations below */

            .footer::after, .nav-bubble:hover::after, @keyframes rotate, @keyframes gradientBG { animation: none !important; }
            /* Floating Emojis Reduced Motion */
             .floating-emoji {
                animation: none !important;
                display: none !important;
            }
            #emoji-container {
                display: none !important;
            }
            /* End Floating Emojis Reduced Motion */

            .bubble-float-1, .bubble-float-2, .bubble-float-3, .bubble-float-4 { animation: none !important; }

            .nav-bubble:hover, .nav-bubble.active, .nav-bubble.inactive { transform: none !important; }
            .nav-bubble:hover .nav-bubble-icon-circle, .nav-bubble.active .nav-bubble-icon-circle { transform: none !important; }
            .nav-bubble:hover .icon, .nav-bubble.active .icon { transform: none !important; }
            .nav-bubble:hover .icon-particle { animation: none !important; display: none; }
            .nav-bubble:hover .nav-bubble-icon-circle::after { animation: none !important; }

            /* Keep inactive state visual cues (opacity/filter) */
            .nav-bubble.inactive {
                 opacity: 0.4;
                 filter: saturate(0.6) blur(1px);
                 transition: none !important;
            }
             .nav-bubble { transition: none !important; }
             .nav-bubble-icon-circle { transition: none !important; }
             .nav-bubble-icon-circle .icon { transition: none !important; }
        }
    </style>
</head>
<body>
    <!-- Toast notification container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Container for floating emojis -->
    <div id="emoji-container"></div>

    <!-- Top Navbar (Added) -->
    <nav class="top-navbar">
        <div class="logo-section">
            <a href="index.html" class="logo" aria-label="Pyr Home">Pyr</a>
            <div class="divider" aria-hidden="true"></div>
            <div class="brand-name">The Great Human Lab</div>
        </div>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="#" class="nav-link">Account</a>
            <a href="#" class="nav-link">Help</a>
            <a href="#" class="notification" aria-label="Notifications">
                <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                <div class="notification-badge">3</div>
            </a>
            <div class="avatar">PY</div>
        </div>
    </nav>

    <main class="main-content" id="main-content">
        <div class="container">
            <div class="dashboard-nav-container">
                <div class="dashboard-nav-grid">
                    <!-- Bubble 1: Fun & Games -->
                    <div class="nav-bubble bubble-purple bubble-float-1" id="bubble-fun" role="button" tabindex="0" aria-labelledby="bubble-fun-title">
                        <div class="nav-bubble-icon-circle">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                                <path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"></path>
                            </svg>
                        </div>
                        <div class="nav-bubble-title" id="bubble-fun-title">Fun & Games</div>
                        <div class="nav-bubble-description">Engaging activities</div>
                    </div>

                    <!-- Bubble 2: Tests & Tasks -->
                    <div class="nav-bubble bubble-blue bubble-float-2" id="bubble-tests" role="button" tabindex="0" aria-labelledby="bubble-tests-title">
                        <div class="nav-bubble-icon-circle">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                            </svg>
                        </div>
                        <div class="nav-bubble-title" id="bubble-tests-title">Tests & Tasks</div>
                        <div class="nav-bubble-description">Check your knowledge</div>
                    </div>

                    <!-- Bubble 3: The Human Lab -->
                    <div class="nav-bubble bubble-orange bubble-float-3" id="bubble-lab" role="button" tabindex="0" aria-labelledby="bubble-lab-title">
                        <div class="nav-bubble-icon-circle">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M4.5 3h15"></path>
                                <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"></path>
                                <path d="M6 14h12"></path>
                            </svg>
                        </div>
                        <div class="nav-bubble-title" id="bubble-lab-title">The Human Lab</div>
                        <div class="nav-bubble-description">Core curriculum</div>
                    </div>

                    <!-- Bubble 4: Parents' Portal -->
                    <div class="nav-bubble bubble-green bubble-float-4" id="bubble-parents" role="button" tabindex="0" aria-labelledby="bubble-parents-title">
                        <div class="nav-bubble-icon-circle">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <div class="nav-bubble-title" id="bubble-parents-title">Parents' Portal</div>
                        <div class="nav-bubble-description">Track progress</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div>
                <div class="footer-logo">Pyr</div>
                <div class="footer-copyright">Â© 2025 The Great Human Lab</div>
            </div>
            <div class="footer-links">
                <a href="#" class="footer-link">Terms</a>
                <a href="#" class="footer-link">Privacy</a>
                <a href="#" class="footer-link">Help</a>
                <a href="#" class="footer-link">Support</a>
            </div>
        </div>
    </footer>

    <script>
        // --- Bubble Interactions ---
        const bubbles = document.querySelectorAll('.nav-bubble');
        const dashboardGrid = document.querySelector('.dashboard-nav-grid');

        // Toast notification functionality
        function showToast(message) {
            const toastContainer = document.getElementById('toast-container');
            
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                <div class="toast-content">${message}</div>
            `;
            
            // Add to container
            toastContainer.appendChild(toast);
            
            // Show with animation
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toastContainer.removeChild(toast);
                }, 300);
            }, 3000);
        }

        // Add energy particles (run once)
        bubbles.forEach(bubble => {
            const iconCircle = bubble.querySelector('.nav-bubble-icon-circle');
            if (!iconCircle) return; // Safety check

            for (let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.classList.add('icon-particle');
                const angle = (i / 12) * Math.PI * 2;
                const distance = 30 + Math.random() * 50;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);
                particle.style.animationDelay = `${i * 0.08}s`;
                if (bubble.classList.contains('bubble-purple')) { particle.style.backgroundColor = '#d8b4fe'; }
                else if (bubble.classList.contains('bubble-blue')) { particle.style.backgroundColor = '#93c5fd'; }
                else if (bubble.classList.contains('bubble-orange')) { particle.style.backgroundColor = '#fdba74'; }
                else if (bubble.classList.contains('bubble-green')) { particle.style.backgroundColor = '#6ee7b7'; }
                iconCircle.appendChild(particle);
            }
        });

        // Demo links
        const demoLinks = document.querySelectorAll('.nav-link, .notification, .avatar, .footer-link');
        demoLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                showToast('Not available in demo');
            });
        });

        // Hover and click listeners
        bubbles.forEach(bubble => {
            let originalTransform = null; // Store original float transform

            bubble.addEventListener('mouseenter', () => {
                // Store the current transform from the float animation
                originalTransform = getComputedStyle(bubble).transform;
                if (originalTransform === "none") originalTransform = ''; // Handle no transform case

                // Apply hover transform directly, overriding float temporarily
                bubble.style.transform = 'translateY(-15px) scale(1.05)'; // Keep subtle card lift

                // Add active class (triggers CSS icon scale/translate, pauses *this* float anim)
                bubble.classList.add('active');

                // Make all other bubbles inactive (triggers CSS dim/blur, *doesn't* pause float)
                bubbles.forEach(otherBubble => {
                    if (otherBubble !== bubble) {
                        otherBubble.classList.add('inactive');
                         otherBubble.classList.remove('active'); // Ensure no other is active
                         otherBubble.style.transform = ''; // Clear any direct transform from JS
                    }
                });

                // Trigger ripple effect
                const iconCircle = bubble.querySelector('.nav-bubble-icon-circle');
                if(iconCircle) iconCircle.setAttribute('data-ripple', Date.now());
            });

            bubble.addEventListener('mouseleave', () => {
                // Remove active class
                bubble.classList.remove('active');

                // Reset direct transform style, allowing CSS float animation to take over again
                bubble.style.transform = '';

                // Remove inactive class from all bubbles
                bubbles.forEach(otherBubble => {
                    otherBubble.classList.remove('inactive');
                });
            });

            // Handle click for navigation/feedback
            bubble.addEventListener('click', () => {
                // Add visual click feedback
                const icon = bubble.querySelector('.icon');
                if (icon) {
                    icon.style.transition = 'transform 0.1s ease-out'; // Quick press down
                    // Adjusted scale/translate for pressed state, considering the reduced hover height
                    icon.style.transform = 'scale(1.1) translateY(-2px)'; // Slightly smaller press than hover
                    setTimeout(() => {
                        icon.style.transition = 'transform 0.3s var(--transition-spring)'; // Restore spring transition
                        // Reset to let CSS :hover/.active handle it
                        icon.style.transform = '';
                    }, 100);
                }
                
                // Navigate only for the Human Lab bubble (course page)
                if (bubble.id === 'bubble-lab') {
                    window.location.href = 'year-1-course.html';
                } else {
                    showToast('Not available in demo');
                }
            });

            // Accessibility: Keyboard interaction
             bubble.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    bubble.click(); // Trigger the same click handler
                }
            });
            bubble.addEventListener('focus', () => {
                 // Optional: Trigger hover-like state on focus for keyboard users
                 // Simulate mouseenter to get the visual effects
                 // bubble.dispatchEvent(new MouseEvent('mouseenter'));
            });
            bubble.addEventListener('blur', () => {
                 // Optional: Remove hover-like state on blur
                 // Simulate mouseleave to reset visual effects
                 // bubble.dispatchEvent(new MouseEvent('mouseleave'));
            });

        });

        // --- Floating Emojis (NEW Logic) ---
        // Configuration
        const historyEmojis = [ // Customize this list as needed
            "ðŸ“œ", "ðŸ›ï¸", "âš”ï¸", "ðŸ›¡ï¸", "ðŸ‘‘", "ðŸ°", "ðŸ—¿", "âš±ï¸", "ðŸ”¥", "ðŸ§ ",
            "ðŸ—£ï¸", "ðŸ“š", "ðŸº", "âš“", "ðŸŒ", "ðŸ§­", "ðŸ”", "ðŸ”¬", "ðŸ§ª", "ðŸŽ­",
            "ðŸ¹", "ðŸ”±", "ðŸª¶", "â³", "ðŸ•°ï¸", "ðŸŒ‹", "ðŸ¥‡", "ðŸ§©", "ðŸ–‹ï¸", "ðŸ¦‰"
        ];
        const minTimeBetweenEmojis = 3000; // Milliseconds
        const maxEmojis = 20; // Max emojis on screen at once
        const defaultEmojiOpacity = 0.2; // Base opacity (can be overridden by JS calculation)

        // DOM Element
        const emojiContainer = document.getElementById('emoji-container');

        // State Variables
        let lastEmojiTime = 0;
        let activeEmojis = 0;
        const numVerticalSections = 10; // Divide screen vertically for spacing
        let sectionHeight = window.innerHeight / numVerticalSections;
        const occupiedSections = new Set(); // Track which vertical sections are busy
        let animationFrameId = null; // For requestAnimationFrame management

        // Create a new emoji element
        function createEmoji(initialX = -100) {
            // Check limits and container existence
            if (activeEmojis >= maxEmojis || !emojiContainer) return;

            // Find an unoccupied vertical section to avoid clustering
            let attempts = 0;
            let sectionIndex;
            do {
                sectionIndex = Math.floor(Math.random() * numVerticalSections);
                attempts++;
            } while (occupiedSections.has(sectionIndex) && attempts < numVerticalSections * 2);

            // If all sections seem occupied (unlikely but possible), bail
            if (occupiedSections.has(sectionIndex)) {
                // console.warn("Could not find free section for emoji."); // Optional warning
                return;
            }

            activeEmojis++;
            occupiedSections.add(sectionIndex);

            // Create the element
            const emoji = document.createElement('div');
            emoji.className = 'floating-emoji';
            emoji.textContent = historyEmojis[Math.floor(Math.random() * historyEmojis.length)];

            // Randomize visual properties
            const size = Math.random() * 15 + 15; // Size between 15px and 30px
            emoji.style.fontSize = `${size}px`;

            // Calculate vertical position within the chosen section
            const topPadding = 0.1 * sectionHeight;
            const bottomPadding = 0.1 * sectionHeight;
            const availableHeightInSection = sectionHeight - topPadding - bottomPadding;
            const verticalPosition = (sectionIndex * sectionHeight) + topPadding + (Math.random() * availableHeightInSection);
             // Ensure emojis don't go off bottom of screen if window is small
            const maxTop = window.innerHeight - size - 10; // 10px buffer
            emoji.style.top = `${Math.min(verticalPosition, maxTop)}px`;


            // Randomize animation properties
            const duration = (30 - size) / 15 * 20 + 25; // Duration based on size (smaller = faster, range ~25s-45s)
            emoji.style.animationDuration = `${duration}s`;

            // Opacity slightly based on size (optional, smaller can be fainter)
            const baseOpacity = ((30 - size) / 15 * 0.1 + defaultEmojiOpacity).toFixed(2); // Adjust multiplier as needed
            emoji.style.setProperty('--emoji-opacity', baseOpacity);

            // Horizontal drift during animation
            const drift = (Math.random() - 0.5) * 30; // Pixels up or down
            emoji.style.setProperty('--emoji-drift', `${drift}px`);

            // Rotation during animation
            const rotation = (Math.random() - 0.5) * 70; // Degrees clockwise/counter-clockwise
            emoji.style.setProperty('--emoji-rotation', `${rotation}deg`);

            // Handle initial population (emojis already partway across screen)
            if (initialX > -100) {
                const animationDelay = -(initialX / window.innerWidth) * duration;
                emoji.style.animationDelay = `${animationDelay}s`;
                // Make immediately visible at correct starting opacity
                emoji.style.opacity = baseOpacity;
            }

            // Cleanup when animation finishes
            emoji.addEventListener('animationend', () => {
                if (emoji.parentNode === emojiContainer) emojiContainer.removeChild(emoji);
                activeEmojis--;
                occupiedSections.delete(sectionIndex); // Free up the section
            }, { once: true });

            // Add to the page
            emojiContainer.appendChild(emoji);

            return emoji; // Return the element if needed
        }

        // Populate some emojis initially across the screen
        function populateInitialEmojis() {
            if (!emojiContainer || window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

            const initialCount = Math.floor(maxEmojis * 0.6); // Start with ~60% capacity
            for (let i = 0; i < initialCount; i++) {
                const initialX = Math.random() * window.innerWidth;
                setTimeout(() => createEmoji(initialX), i * 50); // Stagger creation slightly
            }
             // Reset last time to allow new emojis soon after initial population
             lastEmojiTime = 0;
        }

        // Keep creating emojis over time
        function manageEmojis() {
            // Check reduced motion preference dynamically
             if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                 // Emojis are hidden via CSS, so just stop creating more
                 if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                 }
                 return; // Stop the loop if reduced motion is on
             }

            const now = Date.now();
            // Throttle creation based on time and max count
            if (now - lastEmojiTime >= minTimeBetweenEmojis && activeEmojis < maxEmojis) {
                lastEmojiTime = now;
                createEmoji(); // Create a new one starting from the left
            }
            // Schedule the next check
            animationFrameId = requestAnimationFrame(manageEmojis); // Use rAF for smoother scheduling
        }

        // Recalculate section height on window resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                sectionHeight = window.innerHeight / numVerticalSections;
            }, 250);
        });

        // Listen for prefers-reduced-motion
        window.matchMedia('(prefers-reduced-motion: reduce)').addEventListener('change', (e) => {
            if (e.matches) {
                // Reduced motion is enabled
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                }
                // Optionally hide existing emojis
                if(emojiContainer) emojiContainer.style.display = 'none';
            } else {
                // Reduced motion is disabled
                if(emojiContainer) emojiContainer.style.display = ''; // Show container
                if (!animationFrameId) { // Restart loop if not already running
                    populateInitialEmojis(); // Repopulate if desired
                    manageEmojis();
                }
            }
        });

        // --- Initialize Emojis ---
        // Wait for DOM to be ready
         document.addEventListener('DOMContentLoaded', () => {
             if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                // Update sectionHeight initially
                sectionHeight = window.innerHeight / numVerticalSections;
                populateInitialEmojis(); // Create the initial set
                animationFrameId = requestAnimationFrame(manageEmojis); // Start the continuous loop
             }
         });
    </script>
</body>
</html>
